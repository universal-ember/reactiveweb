{"version":3,"file":"ember-compat.js","sources":["../../src/-private/ember-compat.ts"],"sourcesContent":["import { dependencySatisfies, importSync, macroCondition } from '@embroider/macros';\n\nimport type Owner from '@ember/owner';\n\ninterface CompatOwner {\n  getOwner: (context: unknown) => Owner | undefined;\n  setOwner: (context: unknown, owner: Owner) => void;\n  linkOwner: (toHaveOwner: unknown, alreadyHasOwner: unknown) => void;\n}\n\nexport const compatOwner = {\n  linkOwner(toHaveOwner, alreadyHasOwner) {\n    const owner = compatOwner.getOwner(alreadyHasOwner);\n\n    if (owner) {\n      compatOwner.setOwner(toHaveOwner, owner);\n    }\n  },\n} as CompatOwner;\n\nif (macroCondition(dependencySatisfies('ember-source', '>=4.12.0'))) {\n  // In no version of ember where `@ember/owner` tried to be imported did it exist\n  // if (macroCondition(false)) {\n  // Using 'any' here because importSync can't lookup types correctly\n\n  compatOwner.getOwner = (importSync('@ember/owner') as any).getOwner;\n  compatOwner.setOwner = (importSync('@ember/owner') as any).setOwner;\n} else {\n  // Using 'any' here because importSync can't lookup types correctly\n  compatOwner.getOwner = (importSync('@ember/application') as any).getOwner;\n  compatOwner.setOwner = (importSync('@ember/application') as any).setOwner;\n}\n"],"names":["compatOwner","linkOwner","toHaveOwner","alreadyHasOwner","owner","getOwner","setOwner","macroCondition","dependencySatisfies","importSync"],"mappings":";;AAUO,MAAMA,WAAW,GAAG;AACzBC,EAAAA,SAASA,CAACC,WAAW,EAAEC,eAAe,EAAE;AACtC,IAAA,MAAMC,KAAK,GAAGJ,WAAW,CAACK,QAAQ,CAACF,eAAe,CAAC;AAEnD,IAAA,IAAIC,KAAK,EAAE;AACTJ,MAAAA,WAAW,CAACM,QAAQ,CAACJ,WAAW,EAAEE,KAAK,CAAC;AAC1C,IAAA;AACF,EAAA;AACF;AAEA,IAAIG,cAAc,CAACC,mBAAmB,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC,EAAE;AACnE;AACA;AACA;;EAEAR,WAAW,CAACK,QAAQ,GAAII,UAAU,CAAC,cAAc,CAAC,CAASJ,QAAQ;EACnEL,WAAW,CAACM,QAAQ,GAAIG,UAAU,CAAC,cAAc,CAAC,CAASH,QAAQ;AACrE,CAAC,MAAM;AACL;EACAN,WAAW,CAACK,QAAQ,GAAII,UAAU,CAAC,oBAAoB,CAAC,CAASJ,QAAQ;EACzEL,WAAW,CAACM,QAAQ,GAAIG,UAAU,CAAC,oBAAoB,CAAC,CAASH,QAAQ;AAC3E;;;;"}